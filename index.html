// DateUtils.js
class DateUtils {
    static parseDate(dateString) {
        const date = new Date(dateString);
        if (isNaN(date)) {
            throw new Error('Invalid date format');
        }
        return date;
    }
    static formatDate(date) {
        return date.toISOString().split('T')[0];
    }
    static validateDate(dateString) {
        const date = new Date(dateString);
        return !isNaN(date);
    }
}

// NumUtils.js
class NumUtils {
    static calculatePercentage(value, total) {
        return (total > 0) ? (value / total) * 100 : 0;
    }
    static roundToTwo(value) {
        return Math.round((value + Number.EPSILON) * 100) / 100;
    }
}

// KPICalculator.js
class KPICalculator {
    constructor(tasks) {
        this.tasks = tasks;
        this.completedTasks = tasks.filter(task => task.status === 'completed');
    }
    calculateCompletionRate() {
        return NumUtils.calculatePercentage(this.completedTasks.length, this.tasks.length);
    }
    calculateAverageTime() {
        const totalDuration = this.completedTasks.reduce((acc, task) => acc + task.duration, 0);
        return this.completedTasks.length > 0 ? totalDuration / this.completedTasks.length : 0;
    }
}

// GanttRenderer.js
class GanttRenderer {
    constructor(tasks) {
        this.tasks = tasks;
    }
    render() {
        // Basic Gantt chart rendering logic would go here
        console.log('Rendering Gantt chart...');
    }
    renderWithFallback() {
        try {
            this.render();
        } catch (error) {
            console.error('Error rendering Gantt chart:', error);
            // Fallback rendering logic
        }
    }
}

// Main Kanban Class
class Kanban {
    constructor(tasks) {
        this.tasks = tasks;
        this.kpiCalculator = new KPICalculator(tasks);
        this.ganttRenderer = new GanttRenderer(tasks);
    }
    getFutureTasks() {
        const today = new Date();
        return this.tasks.filter(task => new Date(task.dueDate) > today);
    }
    generateReport() {
        console.log('Completion Rate:', this.kpiCalculator.calculateCompletionRate(), '%');
        console.log('Average Completion Time:', this.kpiCalculator.calculateAverageTime(), 'days');
    }
    renderGanttChart() {
        this.ganttRenderer.renderWithFallback();
    }
}